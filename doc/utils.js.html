<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: utils.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: utils.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** @module Utils */
import { gcd } from "./c.js";
import { C } from "./main.js";

/**
 * Returns the type of object
 * @return {string}
 * @ignore
 */
export const type = (stuff) => Object.prototype.toString.call(stuff).slice(8, -1);

Object.clone =
	Object.clone ||
	function (toClone) {
		let newObj = {};
		for (let i = 0, keys = Object.keys(toClone); i &lt; keys.length; i++) {
			let a = toClone[keys[i]];
			newObj[keys[i]] = a;
		}
		return newObj;
	};

/**
 * defines new properties to a given Object
 *
 * @param {*} source source object
 * @param {*} [target=window] target object
 * @param {boolean} [assignToC=true] whether apply properties to C.
 */
export function defineProperties(source, target = window, assignToC = false) {
	Object.assign(target, source);
	if (assignToC) Object.assign(C.functions, source);
}

/**
 * Returns a array of numbers from `start` to `end` with each element having difference of `step`
 *
 * @param {number} start
 * @param {number} end
 * @param {number} step
 * @param {boolean} [rev=false] return in reverse order
 * @return {Array}
 */
export function arange(start, end, step, rev = false) {
	let arr = [];
	if (rev) for (let i = end; i >= start; i -= step) arr.push(i);
	else for (let i = start; i &lt;= end; i += step) arr.push(i);
	return arr;
}

/**
 * Applies default configurations to a given target object
 * Must be in the form of
 *
 * @param {Object} _default default configurations
 * @param {Object} [target] target object. Default = {}.
 * @param {boolean} [deepApply=true] whether to apply defaults to deep nested objects
 * @return {Object} applied object
 * @ignore
 */
export function applyDefault(_default, target = {}, deepApply = true) {
	target = Object.clone(target);
	for (let i = 0, keys = Object.keys(_default); i &lt; keys.length; i++) {
		let prop = keys[i],
			defaultProp = _default[prop],
			targetProp = target[prop],
			defaultType = type(defaultProp),
			targetType = type(targetProp);
		if (defaultType == "Object" &amp;&amp; deepApply) {
			target[prop] = applyDefault(defaultProp, targetProp, deepApply);
		}
		if (defaultType == "Undefined" || defaultType == "Null") {
			// let the value in target as it is. Since the type is not defined in default configs
			continue;
		}
		if (targetType !== defaultType) {
			target[prop] = _default[prop];
		}
	}
	return target;
}

/**
 * fills and strokes inside the current shape if to do so.
 *
 * @param {CanvasRenderingContext2D} ctx
 * @ignore
 */
export function doFillAndStroke(ctx) {
	if (ctx.doFill) ctx.fill();
	if (ctx.doStroke) ctx.stroke();
}

/**
 * Returns index of first element that is close to ```val```
 *
 * @param {number} val value to search for
 * @param {Array} array
 * @param {number} [epsilon=1e-6] maximum difference
 * @return {number}
 * @ignore
 */
export function approximateIndexInArray(val, array, epsilon = 1e-6) {
	for (let i = 0; i &lt; array.length; i++) {
		let k = array[i];
		if (Math.abs(k - val) &lt;= epsilon) {
			return i;
		}
	}
	return -1;
}

/**
 * convert tex to image using MathJax
 *
 * @param {string} latex
 * @return {Promise}
 * @ignore
 */

export function latexToImg(latex) {
	return new Promise((resolve, reject) => {
		let wrapper = MathJax.tex2svg(`${latex}`, { em: 10, ex: 5, display: true });
		let mjOut = wrapper.getElementsByTagName("svg")[0];
		// mjOut.setAttribute("xmlns", "http://www.w3.org/2000/svg")
		let output = { svg: "", img: "" };
		output.svg = mjOut.outerHTML;
		var image = new Image();
		image.src =
			"data:image/svg+xml;base64," +
			window.btoa(unescape(encodeURIComponent(output.svg)));
		image.onload = function () {
			var canvas = document.createElement("canvas");
			canvas.width = image.width;
			canvas.height = image.height;
			var context = canvas.getContext("2d");
			context.drawImage(image, 0, 0);
			output.img = canvas.toDataURL("image/png");
			resolve(output.img);
		};
		image.onerror = function () {
			reject();
		};
	});
}

/**
 * Generates tex code for given fraction.
 *
 * @param {number} numerator numerator of fraction
 * @param {number} denominator denominator of fraction
 * @param {boolean} [simplifyFraction=true] whether to simplify fraction by dividing numerator and denominator by gcd
 * @param {boolean} [compact=true] whether to add ```multiple``` with numerator or simply append it to end of string
 * @param {string} [multiple=""] an multiple
 * @returns {string}
 *
 * @example
 * fraction(5, 10, false) // -> \frac{5}{10}
 * fraction(5, 10, true) // -> \frac{1}{2}
 * fraction(5, 10, true, true, "π") // -> \frac{π}{2}
 * fraction(5, 10, true, false, "π") // -> \frac{1}{2}π
 * fraction(5, 10, false, false, "π") // -> \frac{5}{10}π
 * fraction(5, 10, false, true, "π") // -> \frac{5π}{10}
 * @ignore
 */
export function fraction(
	numerator,
	denominator,
	simplifyFraction = true,
	compact = true,
	multiple = "",
) {
	if (simplifyFraction) {
		let _divider = gcd(numerator, denominator);
		numerator /= _divider;
		denominator /= _divider;
	}
	let tex = "";
	if (numerator == 0) {
		tex = "0";
	} else if (denominator == 1) {
		tex = numerator + multiple;
	} else {
		if (compact) {
			// if numerator is 1 and there is a multiple, add multiple without numerator
			if (numerator == 1 &amp;&amp; multiple != "") numerator = "";
			tex = `\\frac{${numerator}${multiple}}{${denominator}}`;
		} else {
			tex = `\\frac{${numerator}}{${denominator}}${multiple}`;
		}
	}
	return tex;
}

window["applyDefault"] = applyDefault;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-Arithmetic%2520functions.html">Arithmetic functions</a></li><li><a href="module-Arrows.html">Arrows</a></li><li><a href="module-Braces.html">Braces</a></li><li><a href="module-Color%2520Converters.html">Color Converters</a></li><li><a href="module-Color%2520gradient.html">Color gradient</a></li><li><a href="module-Color%2520lear.html">Color lear</a></li><li><a href="module-Color%2520Palettes.html">Color Palettes</a></li><li><a href="module-Color%2520Reader.html">Color Reader</a></li><li><a href="module-Colors.html">Colors</a></li><li><a href="module-Coordinate%2520systems.html">Coordinate systems</a></li><li><a href="module-Extra%2520shapes.html">Extra shapes</a></li><li><a href="module-Geometric%2520shapes.html">Geometric shapes</a></li><li><a href="module-Image.html">Image</a></li><li><a href="module-Image%2520Processing.html">Image Processing</a></li><li><a href="module-Plottter%2520Functions.html">Plottter Functions</a></li><li><a href="module-Point%2520Utils.html">Point Utils</a></li><li><a href="module-Random%2520Colors.html">Random Colors</a></li><li><a href="module-Random%2520functions.html">Random functions</a></li><li><a href="module-Settings.html">Settings</a></li><li><a href="module-Tex.html">Tex</a></li><li><a href="module-text.html">text</a></li><li><a href="module-Utils.html">Utils</a></li></ul><h3>Classes</h3><ul><li><a href="m4_m4.html">m4</a></li><li><a href="WebGL.html">WebGL</a></li></ul><h3>Global</h3><ul><li><a href="global.html#C">C</a></li><li><a href="global.html#createWebGL">createWebGL</a></li><li><a href="global.html#fontStretch">fontStretch</a></li><li><a href="global.html#generatePointsInArc">generatePointsInArc</a></li><li><a href="global.html#quadraticCurve">quadraticCurve</a></li><li><a href="global.html#readMatrix">readMatrix</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.11</a> on Wed Aug 09 2023 08:09:24 GMT+0530 (India Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
