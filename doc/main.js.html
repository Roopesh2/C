<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: main.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: main.js</h1>






    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { defineProperties } from "./defineProperties.js";
// main file; defines C function
const defaultConfig = {
	width: 200, // width of canvas multiplied by dpr
	height: 200, // height of canvas  multiplied by dpr

	dpr: Math.ceil(devicePixelRatio || 1), // device pixel ratio for clear drawings

	// states
	doFill: true,
	doStroke: true,
	pathStarted: false,
	yAxisInverted: false,

	netRotation: 0,
	currentLoop : null,
	textAlign : "start",
	textBaseline : "alphabetic",
	// color stuff
	fillStyle: "#ffffff",
	background: "#ffffff",
	strokeStyle: "#000000",
	colorMode: "rgba",
	lineWidth: 1,

	// font properties
	fontSize: "20px",
	fontFamily: "serif",
	fontStyle: "normal",
	fontVariant: "normal",
	fontWeight: "normal",
	fontStretch: "normal",
	lineHeight: "1.2",
	font: "20px serif"
};

function assignDefaultConfigs (cfgs) {
	for (
		let i = 0, properties = Object.keys(defaultConfig);
		i &lt; properties.length;
		i++
	) {
		const property = properties[i];
		if (cfgs[property] === undefined) cfgs[property] = defaultConfig[property];
	}
}

/**
 * Main Function
 *
 * @param {function} fx codes to exeecute
 * @param {HTMLElement} [container=document.body] container for the drawings
 * @param {object} [configs={}] configurations
 */
function C (fx, container = document.body, configs = {}) {
	// assign configs
	assignDefaultConfigs(configs);

	// initialize canvas
	let canvas = C.makeCanvas(configs);
	if (typeof container === "string") { container = document.querySelector(container); }
	let canvasName;
	if (configs.name != undefined) {
		canvasName = configs.name;
		const cvs = document.getElementById(canvasName);
		if (cvs instanceof HTMLElement) {
			// if already exist
			canvas = cvs;
			prepareCanvas();
			fx();
			return;
		}
	} else {
		// finds a name for canvas that already don't exist
		while (document.getElementById("canvas-" + C.nameID) != undefined) {
			C.nameID++;
		}

		canvasName = "canvas-" + C.nameID;
		configs.name = canvasName;
	}
	function prepareCanvas () {
		// add additional information to rendererContext
		C.resizeCanvas(canvas, configs);
		canvas.context = Object.assign(canvas.getContext("2d"), configs);
		canvas.context.setTransform(configs.dpr, 0, 0, configs.dpr, 0, 0);
		C.workingCanvas = canvas.context;
		C.workingCanvas.savedStates = defaultConfig;
	}
	// set canvas's id and class to its name
	canvas.id = canvasName;
	canvas.classList.add(canvasName);
	// add canvas to container
	container.appendChild(canvas);
	prepareCanvas();
	C.canvasList[canvasName] = canvas.context;
	fx();
}

/**
 * List of available canvases
 * @type {Object}
*/
C.canvasList = {};

/**
 * number of canvases
 * @type {Number}
 */
C.nameID = 0;

/**
 * current working canvas
 * @type {CanvasRenderingContext2D}
 */
C.workingCanvas = undefined; // index of current working canvas in `canvasList`

/**
 * default configurations
 */
C.defaultConfig = defaultConfig;
/**
 * return inner width of container tag
 * @param {HTMLElement} [container=document.body]
 * @returns {Number}
 */
C.getContainerWidth = function (container = document.body) {
	const cs = window.getComputedStyle(container);
	return (
		parseInt(cs.width) -
    parseInt(cs.paddingRight) -
    parseInt(cs.paddingLeft)
	);
};

/**
 * set width and height attribute of canvas element to the given values in `configs`
 * and scales CSS width and height to DPR
 *
 * values needed in `configs`:
 *
 *   width: &lt;Number> width in pixels
 *
 *   height: &lt;Number> height in pixels
 *
 *   dpr: &lt;Number> dpr
 * @global
 * @param {HTMLCanvasElement} cvs
 * @param {Object} configs
 */
C.resizeCanvas = function (cvs, configs) {
	const width = configs.width;
	const height = configs.height;
	const dpr = configs.dpr;
	cvs.style.width = width + "px";
	cvs.style.height = height + "px";
	cvs.width = dpr * width;
	cvs.height = dpr * height;
};

/**
 * returns a canvas element with given params
 *
 * @param {Object} configs
 * @returns {HTMLCanvasElement}
 */
C.makeCanvas = function (configs) {
	const cvs = document.createElement("canvas");
	this.resizeCanvas(cvs, configs);
	return cvs;
};

/**
 * add extension to window and C extension list
 *
 * @param {Object} extObj
 * @param {boolean} editable warn the edit of functions
 */
C.addExtension = function (extObj, editable) {
	defineProperties(extObj, window, !editable);
	defineProperties(extObj, C.extensions, !editable);
};

/**
*/
C.defineProperties = defineProperties;
// register to window
window.C = C;

export {C};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-color.html">color</a></li><li><a href="module-constants.html">constants</a></li><li><a href="module-curves.html">curves</a></li><li><a href="module-image.html">image</a></li><li><a href="module-linear.html">linear</a></li><li><a href="module-math.html">math</a></li><li><a href="module-settings.html">settings</a></li><li><a href="module-text.html">text</a></li></ul><h3>Global</h3><ul><li><a href="global.html#arcBrace">arcBrace</a></li><li><a href="global.html#arrow">arrow</a></li><li><a href="global.html#arrowTip">arrowTip</a></li><li><a href="global.html#axes">axes</a></li><li><a href="global.html#C">C</a></li><li><a href="global.html#curlyBrace">curlyBrace</a></li><li><a href="global.html#curvedArrow">curvedArrow</a></li><li><a href="global.html#curvedArrowBetweenPoints">curvedArrowBetweenPoints</a></li><li><a href="global.html#curvedDoubleArrow">curvedDoubleArrow</a></li><li><a href="global.html#curvedDoubleArrowBetweenPoints">curvedDoubleArrowBetweenPoints</a></li><li><a href="global.html#defineProperties">defineProperties</a></li><li><a href="global.html#doFillAndStroke">doFillAndStroke</a></li><li><a href="global.html#doubleArrow">doubleArrow</a></li><li><a href="global.html#fontStretch">fontStretch</a></li><li><a href="global.html#getImgageFromTex">getImgageFromTex</a></li><li><a href="global.html#measurement">measurement</a></li><li><a href="global.html#numberLine">numberLine</a></li><li><a href="global.html#numberPlane">numberPlane</a></li><li><a href="global.html#quadraticCurve">quadraticCurve</a></li><li><a href="global.html#resizeCanvas">resizeCanvas</a></li><li><a href="global.html#RGBToHSL">RGBToHSL</a></li><li><a href="global.html#tex">tex</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Thu Jul 22 2021 12:02:08 GMT+0530 (India Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
