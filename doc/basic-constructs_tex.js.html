<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title>JSDoc: Source: basic-constructs/tex.js</title>

		<script src="scripts/prettify/prettify.js"></script>
		<script src="scripts/prettify/lang-css.js"></script>
		<!--[if lt IE 9]>
			<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		<link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css" />
		<link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css" />
	</head>

	<body>
		<div id="main">
			<h1 class="page-title">Source: basic-constructs/tex.js</h1>

			<section>
				<article>
					<pre
						class="prettyprint source linenums"><code>import { CENTER, RIGHT } from "../constants/drawing.js";
import { C } from "../main.js";

/**
 * Renders the input tex into a HTMLImageElement
 *
 * @param {string} input
 * @return {HTMLImageElement}
 */
function getImgageFromTex(input) {
	if (
		typeof window.MathJax == "object" &amp;&amp;
		typeof window.MathJax.tex2svg == "function"
	) {
		const ctx = C.workingCanvas;
		// eslint-disable-next-line no-undef
		const svgOutput = MathJax.tex2svg(input).getElementsByTagName("svg")[0];
		const g = svgOutput.getElementsByTagName("g")[0];
		svgOutput.style.verticalAlign = "1ex";
		g.setAttribute("stroke", ctx.strokeStyle);
		g.setAttribute("fill", ctx.fillStyle);
		let outerHTML = svgOutput.outerHTML,
			blob = new Blob([outerHTML], { type: "image/svg+xml;charset=utf-8" });
		let URL = window.URL || window.webkitURL || window;
		let blobURL = URL.createObjectURL(blob);
		let image = new Image();
		image.src = blobURL;
		return image;
	} else {
		console.error("MathJax is not found. Please include");
	}
}

/**
 * Draws tex inputs
 *
 * @param {string} input
 * @param {number} [x=0]
 * @param {number} [y=0]
 * @return {HTMLImageElement} image representation of tex
 */
function tex(input, x = 0, y = 0) {
	const image = getImgageFromTex(input);
	const ctx = C.workingCanvas;
	const text_align = ctx.textAlign,
		text_baseline = ctx.textBaseline;
	image.onload = function () {
		ctx.save();
		const { width, height } = image;
		// translating the image according to text-align and text-baseline
		switch (text_align) {
			case CENTER:
				ctx.translate(-width / 2, 0);
				break;
			case RIGHT:
				ctx.translate(-width, 0);
				break;
			default:
				break;
		}
		switch (text_baseline) {
			case "middle":
				ctx.translate(0, height / 2);
				break;
			case "bottom":
				ctx.translate(0, height);
				break;
			default:
				break;
		}
		// invert axis first
		ctx.scale(1, -1);
		ctx.drawImage(image, x, -y);
		ctx.restore();
	};
	return image;
}

export {
	tex,
	getImgageFromTex
};
</code></pre>
				</article>
			</section>
		</div>

		<nav>
			<h2><a href="index.html">Home</a></h2>
			<h3>Modules</h3>
			<ul>
				<li><a href="module-color.html">color</a></li>
				<li><a href="module-constants.html">constants</a></li>
				<li><a href="module-curves.html">curves</a></li>
				<li><a href="module-image.html">image</a></li>
				<li><a href="module-linear.html">linear</a></li>
				<li><a href="module-math.html">math</a></li>
				<li><a href="module-settings.html">settings</a></li>
				<li><a href="module-text.html">text</a></li>
			</ul>
			<h3>Global</h3>
			<ul>
				<li><a href="global.html#arcBrace">arcBrace</a></li>
				<li><a href="global.html#arrow">arrow</a></li>
				<li><a href="global.html#arrowTip">arrowTip</a></li>
				<li><a href="global.html#axes">axes</a></li>
				<li><a href="global.html#C">C</a></li>
				<li><a href="global.html#curlyBrace">curlyBrace</a></li>
				<li><a href="global.html#curvedArrow">curvedArrow</a></li>
				<li>
					<a href="global.html#curvedArrowBetweenPoints">curvedArrowBetweenPoints</a>
				</li>
				<li><a href="global.html#curvedDoubleArrow">curvedDoubleArrow</a></li>
				<li>
					<a href="global.html#curvedDoubleArrowBetweenPoints"
						>curvedDoubleArrowBetweenPoints</a
					>
				</li>
				<li><a href="global.html#defineProperties">defineProperties</a></li>
				<li><a href="global.html#doFillAndStroke">doFillAndStroke</a></li>
				<li><a href="global.html#doubleArrow">doubleArrow</a></li>
				<li><a href="global.html#fontStretch">fontStretch</a></li>
				<li><a href="global.html#getImgageFromTex">getImgageFromTex</a></li>
				<li><a href="global.html#measurement">measurement</a></li>
				<li><a href="global.html#numberLine">numberLine</a></li>
				<li><a href="global.html#numberPlane">numberPlane</a></li>
				<li><a href="global.html#quadraticCurve">quadraticCurve</a></li>
				<li><a href="global.html#resizeCanvas">resizeCanvas</a></li>
				<li><a href="global.html#RGBToHSL">RGBToHSL</a></li>
				<li><a href="global.html#tex">tex</a></li>
			</ul>
		</nav>

		<br class="clear" />

		<footer>
			Documentation generated by
			<a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Thu Jul 22 2021 12:02:08
			GMT+0530 (India Standard Time)
		</footer>

		<script>
			prettyPrint();
		</script>
		<script src="scripts/linenumber.js"></script>
	</body>
</html>
