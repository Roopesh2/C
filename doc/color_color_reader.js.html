<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: color/color_reader.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: color/color_reader.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** @module Color Reader */

import { Colors } from "../constants/colors.js";

// adapeted from p5.js
// Full color string patterns. The capture groups are necessary.
let // Matches: #XXX
	HEX3 = /^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,
	// Matches: #XXXX
	HEX4 = /^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,
	// Matches: #xxxxxx
	HEX6 = /^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,
	// Matches: #XXXXXXXX
	HEX8 = /^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,
	// Matches: rgb(R, G, B)
	RGB = /^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/i,
	// Matches: rgb(R, G, B, A)
	RGBA = /^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),(?:(\d+(?:\.\d+)?)|(?:\.\d+))\)$/i;
/**
 * Reads the argument and returns color in the prefered colorMode.
 * If last argument is given true, it will return the colors as array.
 * Possible use cases (these assume colorModes to be 'rgba'):
 * Only accept valid css colors
 *
 * * readColor(100)                 // rgba(100, 100, 100, 1)
 * * readColor(255, 200)            // rgba(255, 200, 0, 1)
 * * readColor(255, 200, 100)       // rgba(255, 200, 100, 1)
 * * readColor(290, 134, 50, 0.6)   // rgba(290, 134, 50, 0.6)
 * * readColor("#f3d")              // rgba(255, 51, 221, 1)
 * * readColor("#fa054f")           // rgba(250, 5, 79, 1)
 * * readColor("#fa054fa0")         // rgba(250, 5, 79, 0.6274509803921569)
 * * readColor(255, 200, 100, true) // [255, 200, 100, 1]
 * * readColor("#f3da", true)       // [255, 51, 221, 0.0392156862745098]
 *
 * @return {Object} color string/array
 */
export function readColor(...color) {
	let result;
	if (Array.isArray(color[0])) color = color[0];
	let c1 = color[0];
	if (typeof c1 === "number") {
		if (color.length === 1) {
			result = [c1, c1, c1, 1];
		} else if (color.length === 2) {
			result = [c1, color[1], 0, 1];
		} else if (color.length === 3) {
			result = [c1, color[1], color[2], 1];
		} else if (color.length === 4) {
			result = [c1, color[1], color[2], color[3]];
		}
	} else if (typeof c1 == "string") {
		// Adapted from p5.js
		let str = c1.replace(/\s/g, "").toLowerCase();
		// convert string to array if it is a named colour.
		if (Colors[str]) {
			result = Colors[str];
			result = [
				parseInt(result.substr(1, 2), 16),
				parseInt(result.substr(3, 2), 16),
				parseInt(result.substr(5, 2), 16),
				1,
			];
		} else if (HEX3.test(str)) {
			result = HEX3.exec(str)
				.slice(1)
				.map((color) => parseInt(color + color, 16));
			result[3] = 1;
		} else if (HEX6.test(str)) {
			result = HEX6.exec(str)
				.slice(1)
				.map((color) => parseInt(color, 16));
			result[3] = 1;
		} else if (HEX4.test(str)) {
			result = HEX4.exec(str)
				.slice(1)
				.map((color) => parseInt(color + color, 16));
			result[3] /= 255;
		} else if (HEX8.test(str)) {
			result = HEX8.exec(str)
				.slice(1)
				.map((color) => parseInt(color, 16));
			result[3] /= 255;
		} else if (RGB.test(str)) {
			result = RGB.exec(str)
				.slice(1)
				.map((color) => parseInt(color, 10));
			result[3] = 1;
		} else if (RGBA.test(str)) {
			result = RGBA.exec(str)
				.slice(1)
				.map((color, index) => {
					if (index == 3) return parseFloat(color);
					return parseInt(color, 10);
				});
		} else {
			throw new Error("Cannot convert given value to color: " + str);
		}
	} else {
		result = c1;
		return {
			rgbaA: result,
			rgba: result,
			hex6: result,
			hex8: result,
			hex: result,
			hsl: result,
		};
	}

	let a = result[3];
	result[3] *= 255;
	let hex6 = "#",
		r = result;
	r.map((color, i) => {
		if (i &lt; 3) {
			let hex = Math.round(color).toString(16);
			hex6 += hex.length == 1 ? "0" + hex : hex;
		}
	});
	let hex8 = "#";
	r = result;
	r.map((color, i) => {
		if (i &lt; 4) {
			let hex = Math.round(color).toString(16);
			hex8 += hex.length == 1 ? "0" + hex : hex;
		}
	});
	result[3] = a;
	return {
		rgbaA: result,
		rgba: `rgba(${result[0]}, ${result[1]}, ${result[2]}, ${result[3]})`,
		hex6: hex6,
		hex8: hex8,
		hex: hex8,
		hsl: `hsl(${result[0]}, ${result[1]}, ${result[2]})`,
	};
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-Arithmetic%2520functions.html">Arithmetic functions</a></li><li><a href="module-Arrows.html">Arrows</a></li><li><a href="module-Braces.html">Braces</a></li><li><a href="module-Color%2520Converters.html">Color Converters</a></li><li><a href="module-Color%2520gradient.html">Color gradient</a></li><li><a href="module-Color%2520lear.html">Color lear</a></li><li><a href="module-Color%2520Palettes.html">Color Palettes</a></li><li><a href="module-Color%2520Reader.html">Color Reader</a></li><li><a href="module-Colors.html">Colors</a></li><li><a href="module-Coordinate%2520systems.html">Coordinate systems</a></li><li><a href="module-Extra%2520shapes.html">Extra shapes</a></li><li><a href="module-Geometric%2520shapes.html">Geometric shapes</a></li><li><a href="module-Image.html">Image</a></li><li><a href="module-Image%2520Processing.html">Image Processing</a></li><li><a href="module-Plottter%2520Functions.html">Plottter Functions</a></li><li><a href="module-Point%2520Utils.html">Point Utils</a></li><li><a href="module-Random%2520Colors.html">Random Colors</a></li><li><a href="module-Random%2520functions.html">Random functions</a></li><li><a href="module-Settings.html">Settings</a></li><li><a href="module-Tex.html">Tex</a></li><li><a href="module-text.html">text</a></li><li><a href="module-Utils.html">Utils</a></li></ul><h3>Classes</h3><ul><li><a href="m4_m4.html">m4</a></li><li><a href="WebGL.html">WebGL</a></li></ul><h3>Global</h3><ul><li><a href="global.html#C">C</a></li><li><a href="global.html#createWebGL">createWebGL</a></li><li><a href="global.html#fontStretch">fontStretch</a></li><li><a href="global.html#generatePointsInArc">generatePointsInArc</a></li><li><a href="global.html#quadraticCurve">quadraticCurve</a></li><li><a href="global.html#readMatrix">readMatrix</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.11</a> on Wed Aug 09 2023 08:09:24 GMT+0530 (India Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
