<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: basic-constructs/coordinate-systems.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: basic-constructs/coordinate-systems.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { BLUE_C, GREY, WHITE } from "../constants/colors.js";
import { C } from "../main.js";
import { line } from "./linear.js";
import { fillText } from "./text.js";

import {
	fill,
	fontSize,
	restore,
	rotate,
	save,
	stroke,
	strokeWidth,
	translate,
} from "./settings.js";
import { arange, applyDefault } from "../utils/utils.js";
import { arrowTip } from "./arrows.js";
/**
 * creates a axes.
 * xAxis: &lt;object> configs for x axis.
 *   This will be given to numberLine. see {@link numberLine} function for possible values
 * yAxis: &lt;object> configs for y axis.
 *   This will be given to numberLine. see {@link numberLine} function for possible values
 * center: &lt;array> [[0, 0]]
 *   center of axes
 *
 * @param {Object} config
 * @returns axis configs
 */
function axes(config = {}) {
	const ctx = C.workingCanvas;
	// default configurations
	const xAxisDefaults = {
		length: [ctx.width, "number"],
		includeNumbers: [false],
		includeTick: [false],
		includeLeftTip: [true],
		includeRightTip: [true],
		textDirection: [[-0.3, -1]],
	};
	const yAxisDefaults = {
		length: [ctx.height, "number"],
		rotation: [Math.PI / 2, "number"],
		textRotation: [-Math.PI / 2, "number"],
		includeNumbers: [false],
		includeTick: [false],
		includeLeftTip: [true],
		includeRightTip: [true],
	};
	// configurations
	const xAxis = applyDefault(xAxisDefaults, config.xAxis);
	const yAxis = applyDefault(yAxisDefaults, config.yAxis);
	// other configurations
	const center = config.center || [0, 0];
	// range of ticks in each axis
	const xRange = xAxis.range || [-8, 8, 1];
	const yRange = yAxis.range || [-8, 8, 1];
	// unit length of each axis
	// got by dividing length of axis by number of ticks
	const xDX = xAxis.length / ((xRange[1] - xRange[0]) / xRange[2]);
	const yDX = yAxis.length / ((yRange[1] - yRange[0]) / yRange[2]);
	// coordinates of bounding rectangle of the graph
	const xMin = (xRange[0] / xRange[2]) * xDX;
	const yMin = (yRange[0] / yRange[2]) * yDX;
	// variables to shift 0 ticks of axes to center
	const xShift = xAxis.length / 2 + xMin;
	const yShift = yAxis.length / 2 + yMin;
	ctx.save();
	// translate to center
	ctx.translate(center[0], center[1]);

	// draws axes
	// x-axis
	ctx.translate(xShift, 0);
	const xAxisLine = numberLine(xAxis); // draw x axis

	// reverse the effect of shift for drawing y-axis
	ctx.translate(-xShift, yShift);

	// y-axis
	const yAxisLine = numberLine(yAxis); // draw y axis
	// size of a unit cell
	const unit = [xAxisLine.unitLength, yAxisLine.unitLength];

	// reverse the effect of overall shift
	ctx.translate(-center[0], -center[1] - yShift);
	ctx.restore();
	return {
		unit: unit, // major unit size
		xAxis: xAxisLine, // x axis confiurations from numberLine
		yAxis: yAxisLine, // y axis confiurations from numberLine
	};
}

/**
 * Creates a numberLine with parameters in a object
 * (default values for each properties are given in square brackets)
 *
 * point1 : &lt;Array> [[-ctx.width / 2, 0]]
 *   starting point of line
 *
 * point2 : &lt;Array> [[ctx.width / 2, 0]]
 *   ending point of line
 *
 * range : &lt;Array> [[-8, 8, 1]]
 *   range of numbers to draw ticks and numbers
 *
 * numbersToExclude : &lt;Array> [defaultValue=[]]
 *   list of numbers that shouldn't be displayed
 *
 * numbersToInclude : &lt;Array> [defaultValue=[]]
 *   list of numbers to be displayed
 *
 * numbersWithElongatedTicks : &lt;Array> [defaultValue=[]]
 *   list of numbers where tick line should be longer
 *
 * includeLeftTip : &lt;boolean> [false]
 *   whether to add an arrow tip at left
 *
 * includeRightTip : &lt;boolean> [false]
 *   whether to add an arrow tip at right
 *
 * tipWidth : &lt;number> [20]
 *   width of arrow tip in px
 *
 * tipSizeRatio : &lt;number> [1]
 *   height/width of tip
 *
 * color : &lt;hex string> [GREY]
 *   color of axis and ticks
 *
 * lineWidth : &lt;number> [3]
 *   width of lines in px
 *
 * includeTick : &lt;boolean> [true]
 *   whether ticks should be added
 *
 * excludeOriginTick : &lt;boolean> [false]
 *   whether exclude ticks at origin (0)
 *
 * longerTickMultiple : &lt;number> [2]
 *   factor to increase height of ticks at elongated ticks
 *
 * tickHeight : &lt;number> [15]
 *   height of ticks in px
 *
 * textDirection : &lt;array> [0, -0.8]
 *   direction of text relative to nearby tick
 *
 * textColor : &lt;hex string> [WHITE]
 *   color of text
 *
 * textSize : &lt;number> [17]
 *   font size of text
 *
 * textRotation : &lt;number> [0]
 *   amount to rotate text
 *
 * decimalPlaces : &lt;number> [number of decimals in step]
 *   number of decimal places in text
 *
 * @param {object} config
 * @returns unit length
 */
function numberLine(config = {}) {
	const ctx = C.workingCanvas;
	const defaultConfigs = {
		length: [ctx.width, "number"],
		rotation: [0],
		center: [[0, 0]],
		range: [[-8, 8, 1], "array"],
		numbersToExclude: [[]],
		numbersToInclude: [[]],
		numbersWithElongatedTicks: [[]],
		includeLeftTip: [false],
		includeRightTip: [false],
		includeNumbers: [true],
		tipWidth: [20, "number"],
		tipSizeRatio: [1, "number"],
		color: [GREY],
		lineWidth: [3, "number"],
		includeTick: [true],
		excludeOriginTick: [false],
		longerTickMultiple: [1.5, "number"],
		tickHeight: [15, "number"],
		textDirection: [[-0.3, -1]],
		textColor: [WHITE],
		textSize: [17, "number"],
		textRotation: [0],
	};
	applyDefault(defaultConfigs, config);
	const lineLength = config.length;
	const rotation = config.rotation;
	const center = config.center;
	const numbersToExclude = config.numbersToExclude;
	const numbersToInclude = config.numbersToInclude;
	const numbersWithElongatedTicks = config.numbersWithElongatedTicks;
	const includeLeftTip = config.includeLeftTip;
	const includeRightTip = config.includeRightTip;
	const tipWidth = config.tipWidth;
	const tipSizeRatio = config.tipSizeRatio;
	const color = config.color;
	const lineWidth = config.lineWidth;
	const excludeOriginTick = config.excludeOriginTick;
	const longerTickMultiple = config.longerTickMultiple;
	const tickHeight = config.tickHeight;
	const textDirection = config.textDirection;
	const textSize = config.textSize;
	const textRotation = config.textRotation;
	let decimalPlaces = config.decimalPlaces;
	let range = config.range;
	if (Array.isArray(range) &amp;&amp; range.length === 2) {
		range = [range[0], range[1], 1];
	}

	// if number of decimal places is not defined
	// find it using `step`
	if (isNaN(decimalPlaces)) {
		decimalPlaces = (range[2].toString().split(".")[1] || []).length || 0;
	}

	const min = range[0];
	const max = range[1];
	const step = range[2];
	const totalTicks = (max - min) / step;
	const ds = lineLength / totalTicks;

	const list = getTickList();
	save();
	translate(center[0], center[1]);
	rotate(rotation);
	translate(-lineLength / 2, 0);
	if (config.includeTick) drawTicks();
	if (config.includeNumbers) drawNumbers();
	translate(lineLength / 2, 0);
	drawAxis();
	function drawAxis() {
		stroke(color);
		ctx.lineWidth = lineWidth;
		fill(color);
		const r = Math.atan(tipSizeRatio / 2);
		let x1 = -lineLength / 2;
		let x2 = lineLength / 2;
		if (includeLeftTip) {
			arrowTip(x1, 0, tipWidth, 0, tipSizeRatio);
			x1 += tipWidth * Math.cos(r);
		}
		if (includeRightTip) {
			arrowTip(x2, 0, tipWidth, Math.PI, tipSizeRatio);
			x2 -= tipWidth * Math.cos(r) * 1;
		}
		line(x1, 0, x2, 0);
	}

	function drawTicks() {
		stroke(color);
		ctx.lineWidth = lineWidth;
		const from = includeLeftTip ? 1 : 0;
		const to = includeRightTip ? list.length - 1 : list.length;
		for (
			let i = from;
			i &lt; to &amp;&amp; numbersToExclude.indexOf(list[0][i]) &lt; 0;
			i++
		) {
			const tick = list[i];
			if (Number(tick) === 0 &amp;&amp; excludeOriginTick) continue;
			let TH = tickHeight;
			if (numbersWithElongatedTicks.indexOf(tick) > -1) {
				TH *= longerTickMultiple;
			}
			line(ds * i, -TH / 2, ds * i, TH / 2);
		}
	}

	function drawNumbers() {
		const numbers = numbersToInclude.length > 0 ? numbersToInclude : list;
		fill(config.textColor);
		fontSize(textSize);
		const yShift =
			(-textSize / 3) * Math.cos(textRotation) + textDirection[1] * textSize;
		const from = includeLeftTip ? 1 : 0;
		const to = includeRightTip ? numbers.length - 1 : numbers.length;

		for (
			let i = from;
			i &lt; to &amp;&amp; numbersToExclude.indexOf(numbers[i]) &lt; 0;
			i++
		) {
			const tick = numbers[i].toFixed(decimalPlaces);
			if (Number(tick) === 0 &amp;&amp; excludeOriginTick) continue;
			const width = ctx.measureText(tick).width;
			const xShift =
				(-width / 2) * Math.cos(textRotation) +
				textDirection[0] * textSize +
				(textSize / 2) * Math.sin(textRotation);
			translate(ds * i + xShift, yShift - width * Math.sin(textRotation));
			rotate(textRotation);
			fillText(tick, 0, 0);
			rotate(-textRotation);
			translate(-(ds * i + xShift), -(yShift - width * Math.sin(textRotation)));
		}
	}

	function getTickList() {
		return arange(min, max, step);
	}

	// unit interval
	restore();
	return {
		unitLength: ds,
		tickList: list,
		translation: center,
	};
}

/**
 * creates a numberPlane based on following parameters inside a Object
 * xAxis: &lt;object> configs for x axis.
 *   This will be given to numberLine. see {@link numberLine} function for possible values

 * yAxis: &lt;object> configs for y axis.
 *   This will be given to numberLine. see {@link numberLine} function for possible values
 *
 * grid : &lt;object> set of styles to draw grid &amp; subgrids
 *
 * possible properties:
 *   lineWidth        : &lt;number> stroke width of grid lines [1],
 *
 *   color            : &lt;hex string> color of grid lines ["#58C4DDA0"],
 *
 *   subgrids         : &lt;number> number of sub-grid division to draw [0],
 *
 *   subgridLineColor : &lt;hex string> color of sub-grids ["#888888A0"],
 *
 *   subgridLineWidth : &lt;number> stroke width of sub-grid [0.7],
 *
 * @param {Object} config
 * @returns {Object} configurations
 */
function numberPlane(config = {}) {
	const ctx = C.workingCanvas;
	// default configurations
	const xAxisDefaults = {
		textDirection: [[-0.2, 1.3]],
		length: [ctx.width, "number"],
		excludeOriginTick: [true],
		includeLeftTip: [false],
		includeRightTip: [false],
		includeNumbers: [true],
		includeTick: [true],
	};
	const yAxisDefaults = {
		textDirection: [[1.1, 0.6]],
		length: [ctx.height, "number"],
		textRotation: [-Math.PI / 2, "number"],
		excludeOriginTick: [true],
		includeLeftTip: [false],
		includeRightTip: [false],
		includeNumbers: [true],
		includeTick: [true],
	};
	const gridDefaults = {
		lineWidth: [1, "number"],
		color: [BLUE_C + "a0"],
		subgrids: [1, "number"],
		subgridLineColor: [GREY + "50"],
		subgridLineWidth: [0.7, "number"],
	};
	// configurations
	const xAxis = applyDefault(xAxisDefaults, config.xAxis);
	const yAxis = applyDefault(yAxisDefaults, config.yAxis);
	const grid = applyDefault(gridDefaults, config.grid);
	// other configurations
	const subgrids = grid.subgrids;
	const center = config.center || [0, 0];
	// range of ticks in each axis
	const xRange = xAxis.range || [-8, 8, 1];
	const yRange = yAxis.range || [-8, 8, 1];
	// number of ticks in each
	const xNums = (xRange[1] - xRange[0]) / xRange[2];
	const yNums = (yRange[1] - yRange[0]) / yRange[2];
	// unit length of each axis
	const xDX = xAxis.length / xNums;
	const yDX = yAxis.length / yNums;
	// coordinates of bounding rectangle of the graph
	const xMin = (xRange[0] / xRange[2]) * xDX;
	const xMax = (xRange[1] / xRange[2]) * xDX;
	const yMin = (yRange[0] / yRange[2]) * yDX;
	const yMax = (yRange[1] / yRange[2]) * yDX;
	// variables to shift 0 ticks of axes to center
	const xShift = xAxis.length / 2 + xMin;
	const yShift = yAxis.length / 2 + yMin;
	// size of a subgrid unit cell
	const subgridUnit = [xDX / subgrids, yDX / subgrids];

	save();
	// translate to center
	translate(center[0] + xShift, center[1]);

	// draw grids
	drawGridLines();

	// draws axes
	const axesLines = axes({
		xAxis: xAxis,
		yAxis: yAxis,
	});
	// size of a unit cell
	const unit = axesLines.unit;

	// reverse the effect of overall shift
	translate(-(center[0] + xShift), -center[1] - yShift);

	function drawGridLines() {
		// major grid lines
		translate(xMin, 0);
		const subgridxDX = subgridUnit[0];
		const subgridyDX = subgridUnit[1];

		// horizontal grid lines
		for (let i = 0; i &lt;= xNums; i++) {
			// draw major grid lines
			drawMajor(
				i * xDX, // x - shift
				0, // y - shift
				0,
				yMin,
				0,
				yMax
			);

			// draw subgrid grid lines
			for (let k = 1; k &lt;= subgrids &amp;&amp; i &lt; xNums; k++) {
				drawMinor(k * subgridxDX, yMin, k * subgridxDX, yMax);
			}
			translate(-i * xDX);
		}
		translate(-xMin, yMin);
		// vertical grid lines
		for (let i = 0; i &lt;= yNums; i++) {
			// draw major grid lines
			drawMajor(
				0, // x - shift
				i * yDX, // y - shift
				xMin,
				0,
				xMax,
				0
			);

			// draw subgrid grid lines
			for (let k = 1; k &lt;= subgrids &amp;&amp; i &lt; yNums; k++) {
				drawMinor(xMin, k * subgridyDX, xMax, k * subgridyDX);
			}
			translate(0, -i * yDX);
		}
		translate(0, -yMin);

		function drawMajor(shiftX, shiftY, x1, y1, x2, y2) {
			translate(shiftX, shiftY);
			strokeWidth(grid.lineWidth);
			stroke(grid.color);
			line(x1, y1, x2, y2);
		}
		function drawMinor(x1, y1, x2, y2) {
			strokeWidth(grid.subgridLineWidth);
			stroke(grid.subgridLineColor);
			line(x1, y1, x2, y2);
		}
	}

	restore();
	return {
		unit: unit, // major unit size
		subgridUnit: subgridUnit, // subgrid unit size
		xAxis: axesLines.xAxis, // x axis confiurations from numberLine
		yAxis: axesLines.yAxis, // y axis confiurations from numberLine
	};
}

export { axes, numberLine, numberPlane };
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-color.html">color</a></li><li><a href="module-constants.html">constants</a></li><li><a href="module-curves.html">curves</a></li><li><a href="module-image.html">image</a></li><li><a href="module-linear.html">linear</a></li><li><a href="module-math.html">math</a></li><li><a href="module-settings.html">settings</a></li><li><a href="module-text.html">text</a></li></ul><h3>Global</h3><ul><li><a href="global.html#arcBrace">arcBrace</a></li><li><a href="global.html#arrow">arrow</a></li><li><a href="global.html#arrowTip">arrowTip</a></li><li><a href="global.html#axes">axes</a></li><li><a href="global.html#C">C</a></li><li><a href="global.html#curlyBrace">curlyBrace</a></li><li><a href="global.html#curvedArrow">curvedArrow</a></li><li><a href="global.html#curvedArrowBetweenPoints">curvedArrowBetweenPoints</a></li><li><a href="global.html#curvedDoubleArrow">curvedDoubleArrow</a></li><li><a href="global.html#curvedDoubleArrowBetweenPoints">curvedDoubleArrowBetweenPoints</a></li><li><a href="global.html#defineProperties">defineProperties</a></li><li><a href="global.html#doFillAndStroke">doFillAndStroke</a></li><li><a href="global.html#doubleArrow">doubleArrow</a></li><li><a href="global.html#fontStretch">fontStretch</a></li><li><a href="global.html#getImgageFromTex">getImgageFromTex</a></li><li><a href="global.html#measurement">measurement</a></li><li><a href="global.html#numberLine">numberLine</a></li><li><a href="global.html#numberPlane">numberPlane</a></li><li><a href="global.html#quadraticCurve">quadraticCurve</a></li><li><a href="global.html#resizeCanvas">resizeCanvas</a></li><li><a href="global.html#RGBToHSL">RGBToHSL</a></li><li><a href="global.html#tex">tex</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Thu Jul 22 2021 12:02:08 GMT+0530 (India Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
